# 仕様書改善 作業計画

## 目的
Claude CodeやGoogle Antigravityでの実装・改修がしやすいように仕様書を再構成する。
- トークン効率を考慮し、必要な情報だけを参照できるようファイルを分割
- AIエージェントが即座に実装に取りかかれる具体的な記述

## 現状分析

### 現在のドキュメント構成
```
docs/
└── 仕様書.md (約630行、単一ファイル)
```

### 問題点
1. 1ファイルに全情報が集約されており、特定の情報を得るために全文を読み込む必要がある
2. 実装状態（✅/🔲）と仕様が混在し、AIが「何を実装すべきか」の判断にノイズが入る
3. コード構造の詳細（ファイル一覧、関数リファレンス）がない

## 改善方針

### フォルダ名
`docs/` → `specs/` にリネーム（より技術的で明確）

### ファイル分割構成
```
specs/
├── README.md              # 仕様書インデックス（どのファイルに何があるか）
├── 00-overview.md         # プロジェクト概要、背景、制約条件
├── 01-architecture.md     # アーキテクチャ、フォルダ構成、技術仕様
├── 02-data-schema.md      # データ構造（JSONスキーマ詳細）
├── 03-features.md         # 機能一覧と実装状態（フェーズ別）
├── 04-ui-spec.md          # UI仕様、画面構成、色設計、ステータス表示
├── 05-logic.md            # 進捗計算、ステータス自動判定等のロジック
└── 06-code-structure.md   # コード構造、ファイル一覧、関数リファレンス
```

### 各ファイルの役割

| ファイル | 主な読者/用途 | トークン目安 |
|---------|--------------|-------------|
| README.md | 最初に読む。目次・ナビゲーション | ~100行 |
| 00-overview.md | 背景理解が必要な時 | ~80行 |
| 01-architecture.md | 新規ファイル追加・構造変更時 | ~80行 |
| 02-data-schema.md | データ操作・API実装時 | ~150行 |
| 03-features.md | 機能追加・バグ修正時 | ~150行 |
| 04-ui-spec.md | UI変更・スタイル修正時 | ~100行 |
| 05-logic.md | 計算ロジック変更時 | ~60行 |
| 06-code-structure.md | コード修正・関数追加時 | ~150行 |

## 作業タスク

### Phase 1: 準備
- [x] 作業ブランチ作成（feature/improve-specs）
- [x] 現状分析・計画作成（このファイル）
- [x] `docs/` → `specs/` リネーム

### Phase 2: 仕様書分割・作成
- [x] `specs/README.md` 作成（インデックス）
- [x] `specs/00-overview.md` 作成（概要・背景・制約）
- [x] `specs/01-architecture.md` 作成（アーキテクチャ）
- [x] `specs/02-data-schema.md` 作成（データ構造）
- [x] `specs/03-features.md` 作成（機能一覧）
- [x] `specs/04-ui-spec.md` 作成（UI仕様）
- [x] `specs/05-logic.md` 作成（ロジック）
- [x] `specs/06-code-structure.md` 作成（コード構造）

### Phase 3: 整合性確認
- [x] ROADMAP.md のリンク更新
- [x] README.md のリンク更新
- [x] 旧仕様書の削除確認

## AI向け仕様書のガイドライン

1. **具体的なパス・ファイル名を明記**: `src/js/storage.js` のように
2. **JSON例は実際のデータに近い形で**: コピペで使えるレベル
3. **実装状態は明確に分離**: 「実装済み」と「未実装」を別セクションに
4. **関数シグネチャを記載**: `async function saveWbs(wbs: WbsItem): Promise<void>`
5. **依存関係を明示**: 「この機能は○○に依存」

---

## 完了ステータス

- **ブランチ**: `feature/improve-specs`
- **完了日**: 2026-01-21
- **成果物**: `specs/` フォルダ以下に8ファイルの仕様書を作成
